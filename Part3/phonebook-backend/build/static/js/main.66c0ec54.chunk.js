(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{20:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(2),o=t(15),u=t.n(o),r=(t(20),t(3)),a=t(4),i=t.n(a),s="/api/persons",l=function(){return i.a.get(s)},d=function(e){return i.a.post(s,e)},b=function(e,n){return i.a.put("".concat(s,"/").concat(e),n)},m=function(e){return i.a.delete("".concat(s,"/").concat(e))},j=t(0),f=function(e){var n=e.message,t=e.color;return null===n?null:Object(j.jsx)("div",{className:t,children:n})},h=function(e){var n=e.number,t=e.id,c=e.person;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{children:[n.name," ",n.number]}),Object(j.jsx)("button",{onClick:function(){return window.confirm("Are you Sure you want to delete ".concat(c,"?"))?m(t).then(window.location.reload()):null},children:"Delete"})]})},O=function(){var e=Object(c.useState)([]),n=Object(r.a)(e,2),t=n[0],o=n[1],u=Object(c.useState)(""),a=Object(r.a)(u,2),i=a[0],s=a[1],m=Object(c.useState)(""),O=Object(r.a)(m,2),p=O[0],v=O[1],x=Object(c.useState)(""),g=Object(r.a)(x,2),w=g[0],S=g[1],k=Object(c.useState)(!1),y=Object(r.a)(k,2),C=y[0],N=y[1],T=Object(c.useState)(null),D=Object(r.a)(T,2),A=D[0],E=D[1],J=Object(c.useState)("added"),P=Object(r.a)(J,2),B=P[0],F=P[1];Object(c.useEffect)((function(){console.log("effect"),l().then((function(e){console.log("promise fulfilled"),o(e.data)}))}),[]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(f,{message:A,color:B}),Object(j.jsx)("form",{onSubmit:function(e){e.preventDefault();var n=t.map((function(e){return e.name}));N(n.some((function(e){return e.includes(w)}))),console.log(C),console.log(w),S("")},children:Object(j.jsxs)("div",{children:["Search Names with: ",Object(j.jsx)("input",{value:w,onChange:function(e){S(e.target.value)}})]})}),Object(j.jsx)("h2",{children:"Add New Number"}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:i,number:p};t.map((function(e){return e.name})).includes(i)||d(n).then((function(e){o(t.concat(n)),E("".concat(i," has been added")),F("added"),setTimeout((function(){E(null)}),5e3),s(""),v("")})).catch((function(e){E("Person Validation Failed: ".concat(i," must be minimum length(3) & ").concat(p," must be minimum length(8)")),F("error"),setTimeout((function(){E(null)}),5e3)}))},children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:i,onChange:function(e){s(e.target.value)}})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:p,onChange:function(e){v(e.target.value)}})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",onClick:function(e){var n={name:i,number:p};if(t.map((function(e){return e.name})).includes(i)){var c=t.map((function(e){return e.number})),u=t.map((function(e){return e.name})).indexOf(i);console.log(u),console.log(t[u].id);c[u]!==p?window.confirm("Would you like change ".concat(i,"'s number?"))&&b(t[u].id,n).then((function(e){E("".concat(i," has been added")),setTimeout((function(){E(null)}),5e3),window.location.reload()})).catch((function(e){E("".concat(i," has already been removed from the server")),F("error"),setTimeout((function(){E(null)}),5e3)})):window.alert(i+" is already added")}else o(t);console.log(p)},children:"add"})})]}),Object(j.jsx)("h2",{children:"Numbers"}),console.log(w),C?t.filter((function(e){return e.name.includes(w)})).map((function(e){return Object(j.jsx)(h,{number:e,id:e.id,person:e.name},e.name)})):t.map((function(e){return Object(j.jsx)(h,{number:e,id:e.id,person:e.name},e.name)}))]})};u.a.render(Object(j.jsx)(O,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.66c0ec54.chunk.js.map